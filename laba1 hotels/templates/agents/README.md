## Общее

### Связь с БЗ
Файлы для описания действия агента находятся в папке specification, а именно:
   - lib_component_ui_menu_*.scs
   - ui_menu_*.scsi

В этих файлах, если берем из шаблона, меняем то, что в квадратных скобках и `get_definition` на что-то свое.

В конструкции ниже задается количество аргументов агента и действие агента:
```
   action_get_definition _-> ._question_get_definition
		(*
			_-> rrel_1::ui_arg_1;;
		*);;
	._question_get_definition _<- question;;
```
`action_get_definition` - класс действия агента.

Для того, чтобы количество аргументов агента было 2, необходимо добавить строку `_-> rrel_2::ui_arg_2;;` следующим образом:
```
   action_get_definition _-> ._question_get_definition
		(*
			_-> rrel_1::ui_arg_1;;
         		_-> rrel_2::ui_arg_2;;
		*);;
	._question_get_definition _<- question;;
```
Для большего количества добавляем аргументы по аналогии.

### Где писать свой код
В файлах агентов и модулей даны подробные комментарии, где что заменить и что за что отвечает, свой код можно писать после комментария `тут пишите свой агент` и до строчки с завершением агента.

## Агенты на C++:

### Шаблон агента
Шаблон агента можно найти [тут](cxx/exampleModule).

### Как подключить
   - Поместить папку со своим агентом (в данном случае это exampleModule) в папку `problem-solver/cxx/`
   - Добавить следующую строчку со своим агентом в `problem-solver/cxx/CmakeList.txt`:
   `add_subdirectory(exampleModule)`
   - Добавить путь к спецификации в файл `ostis-web-platform/repo.path`, в данном случае добавить строчку:
   `../problem-solver/cxx/exampleModule/specification`
   - Пересобрать машину скриптом `build_problem_solver.sh` и базу скриптом `build_kb.sh`:
```bash
cd scripts
./build_problem_solver.sh
cd ../ostis-web-platform/scripts
./build_kb.sh
```

### Основные файлы
   * Файлы модуля

   Следующие файлы являются файлами модуля:
   
   - ExampleModule.hpp
   - ExampleModule.cpp  

   Модуль может содержать не один агент, а сколько вам нужно. Обычно агенты объединяют в модуль по их назанчению. В данных файлах вам необходимо изменить название класса модуля на своё (в файлах оставленны подробные комментарии), и переназвать сами файлы в соответсвии с названием класса вашего модуля.
   * Файлы ключевых узлов
   
   Следующие файлы являются файлами модуля:
   
   - keynodes/ExampleKeynodes.hpp
   - keynodes/ExampleKeynodes.cpp  
   
   Эти файлы содержат ключевые узлы (адреса узлов из памяти, чтобы не искать их через контекст, а использовать как константу), которые нужны для работы агента. Здесь нужно не забыть поменять название `namespace`, если вы его меняли. Так же можно заменить название класса ключевых узлов.
   
   * Файлы агента
   
   Агенты хранятся в папке `agent`, в данном примере у нас один агент, который ищет определение заданной сущности:
   
   - agent/GetDefinitionAgent.hpp
   - agent/GetDefinitionAgent.cpp
   
   В файлах дано подробное описание, где что заменить и что за что отвечает. После того как измените класс агента, следите за тем, чтобы везде это название заменилось.
   * CMakeList
   
   После того как вы поменяли названия всех файлов в файле `CMakeList.txt` и не забываем так же поменять названия файлов, которые вы меняли, или проверить, что они заменились, если вы это делали через IDE, а также не забываем поменять exampleModule на свой модуль.

### Полезные функции
У класса агента есть переменная (`m_memoryCtx`), которая отвечает за контекст для взаимодействия с памятью. Полный список функций контекста можно найти в файле `ostis-web-platform/sc-machine/sc-memory/sc-memory/sc_memory.hpp`.

Так же есть функции, которые обрабатывают наиболее частые ситуации, с ними можно ознакомится в папке `ostis-web-platform/sc-machine/sc-kpm/sc-agent-common/utils`

## Агенты на Python:

### Шаблон агента
Шаблон агента можно найти [тут](py/services/ExampleModule).

### Как подключить
У агента на python есть часть файлах на C++ и на python, файлы на C++ используются для связи агента и остиса, файлы на python - файлы агента.

Файлы на python:
   - Поместить папку со своим агентом (в данном случаем это services/ExampleModule) в папку `problem-solver/py/services/`

Файлы на C++:
   - Поместить папку со своим агентом (в данном случае это ExampleModule) в папку `problem-solver/py/`
   - Добавить следующую строчку со своим агентом в `problem-solver/py/CmakeList.txt`, в данном случае добавить строчку:
   `add_subdirectory(ExampleModule)`
   - Добавить путь к спецификации в файл `ostis-web-platform/repo.path`, в данном случае добавить строчку:
   `../problem-solver/py/services/ExampleModule/specification`
   - Пересобрать машину скриптом `build_problem_solver.sh` и базу скриптом `build_kb.sh`:
```bash
cd scripts
./build_problem_solver.sh
cd ../ostis-web-platform/scripts
./build_kb.sh
```

### Основные файлы
   * Файл модуля

   Файл модуля - `ExampleModule.py`. В данном файле меняем название класса модуля, логи, и класс агента.
   * Файл агента

   Файл агента - `GetDefinitionAgent.py`. В файле дано подробное описание, где что заменить и что за что отвечает. После того как измените класс агента, следите за тем, чтобы везде это название заменилось.
   * CMakeList
   
   В файле `CMakeList.txt` не забываем поменять ExampleModule на свой модуль.

### Полезные функции
У класса агента есть переменная (`self.ctx`), которая отвечает за контекст для взаимодействия с памятью. Полный список функций контекста можно найти в файле `ostis-web-platform/sc-machine/sc-memory/sc-kpm/sc-python/services/_definitions/sc/sc.py`.
